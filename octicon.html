<html>
<body>
  <script>

    (function() {

      iconCache = {};

      githubPrimer.registerElement('primer-octicon', {
        create: function (ownerDocument, document) {

          var sourcePath = "../octicons/"
          var iconName = this.getAttribute("icon");
          
          if (!iconCache.hasOwnProperty(iconName)) {
            iconCache[iconName] = new Promise((resolve, reject) => {
              fetch(sourcePath + iconName + ".svg")
                .then((result) => {
                  text = result.text();
                  resolve(text);
                });
            });
          }

          iconCache[iconName]
            .then((text) => {
              this.innerHTML = text;
              return text
            });

          return null;

        }
      });

    })();

  </script>
</body>
<html>
