<html>
<body>
  <script>

    (function() {

      iconCache = {};

      githubPrimer.registerElement('primer-octicon', {
        create: function (shadowRoot, ownerDocument, document) {

          var sourcePath = ownerDocument.baseURI.replace(/\/[^\\/]+$/, "") + "/octicons/";
          var iconName = this.getAttribute("icon");

          if (iconCache[iconName] === undefined) {
            iconCache[iconName] = fetch(sourcePath + iconName + ".svg")
              .then((result) => result.text())
          }

          iconCache[iconName]
            .then((text) => {
              shadowRoot.innerHTML = text;
            });
        }
      });

    })();

  </script>
</body>
<html>
