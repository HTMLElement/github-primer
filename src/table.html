<html>
<body>
  <template>
    <style inline type="text/css" src="../css/base.css"></style>
    <style inline type="text/css" src="../css/tables.css" id="tables-style"></style>
  </template>
  <script>

    (function() {

      iconCache = {};

      githubPrimer.registerElement('primer-table', {
        create: function (ownerDocument, document) {

          var tbody = document.createElement('tbody');
          tbody.classList.add('data-table');

          var tableContent = this.getElementsByTagName('tbody');
          if (tableContent.length > 0) {
            Array.from(tableContent[0].childNodes)
            .filter(child => (child instanceof HTMLElement))
            .forEach(child => {
              tbody.appendChild(child)
            });
          }

          var shadowRoot = this.attachShadow({ mode: 'open' });
          shadowRoot.appendChild(tbody);
          return shadowRoot;

        },
        postCreate: function(shadowRoot, ownerDocument, document) {
          githubPrimer.propagateHostStyles(
            shadowRoot.styleSheets,
            '.data-table'
          );
        },
        extends: 'table'
      });

    })();

  </script>
</body>
<html>
